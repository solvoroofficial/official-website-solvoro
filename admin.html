rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    // --- Admin users ---
    match /admins/{uid} {
      allow read, write: if request.auth != null;
    }

    // --- Categories ---
    match /categories/{id} {
      allow read: if true;                 // allow admin panel to load categories
      allow write: if request.auth != null; // allow admin to create/edit/delete
    }

    // --- Products ---
    match /products/{id} {
      allow read: if true;
      allow write: if request.auth != null;
    }

    // --- Services (they are stored as products with service category) ---
    match /services/{id} {
      allow read: if true;
      allow write: if request.auth != null;
    }

    // --- Orders ---
    match /orders/{id} {
      allow read: if request.auth != null; // admin only
      allow create: if true;               // customers can create orders
      allow update, delete: if request.auth != null;
    }

    // --- Site Settings ---
    match /meta/{docId} {
      allow read: if true;
      allow write: if request.auth != null;
    }
  }
}
